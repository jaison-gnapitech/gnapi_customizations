[
 {
  "actions": [],
  "allow_guest_to_view": 0,
  "api_method": null,
  "api_method_name": null,
  "beta": 0,
  "client_script": null,
  "color": null,
  "compatible": null,
  "condition": null,
  "custom": 1,
  "description": "Dynamic status options based on user role",
  "docstatus": 0,
  "doctype": "Client Script",
  "documentation": null,
  "enabled": 1,
  "event_frequency": "On Load",
  "event_frequency_meta": null,
  "event_frequency_meta_value": null,
  "event_frequency_value": "On Load",
  "event_type": "DocType",
  "event_type_doc": "Custom Timesheet",
  "event_type_docfield": null,
  "event_type_field": null,
  "event_type_value": "Custom Timesheet",
  "external_service": null,
  "method": null,
  "modified": "2025-09-25 19:25:00.000000",
  "name": "Custom Timesheet Status Options",
  "priority": 0,
  "reference_doctype": "Custom Timesheet",
  "script": "// Dynamic status options based on user role\nfrappe.ui.form.on('Custom Timesheet', {\n    refresh: function(frm) {\n        // Get user roles\n        frappe.call({\n            method: 'frappe.client.get_value',\n            args: {\n                doctype: 'User',\n                name: frappe.session.user,\n                fieldname: 'roles'\n            },\n            callback: function(r) {\n                if (r.message && r.message.roles) {\n                    const user_roles = r.message.roles;\n                    const is_employee = user_roles.some(role => role.role === 'Employee');\n                    const is_system_manager = user_roles.some(role => role.role === 'System Manager');\n                    \n                    // Update status field options based on role\n                    if (is_employee && !is_system_manager) {\n                        // Employee role - only Draft and Submitted\n                        frm.set_df_property('status', 'options', 'Draft\\nSubmitted');\n                    } else {\n                        // System Manager - all options\n                        frm.set_df_property('status', 'options', 'Draft\\nSubmitted\\nApproved\\nRejected');\n                    }\n                }\n            }\n        });\n    }\n});",
  "script_type": "DocType Event",
  "script_type_meta": null,
  "script_type_meta_value": null,
  "script_type_value": "DocType Event",
  "sort_order": 0,
  "submitted": 0
 }
]