# In the Frappe console, run this:
import frappe

# Create WeeklyTimesheet DocType manually
doctype = frappe.new_doc("DocType")
doctype.name = "WeeklyTimesheet"
doctype.module = "Gnapi Customizations"
doctype.custom = 1
doctype.istable = 0
doctype.issingle = 0
doctype.is_submittable = 1
doctype.autoname = "field:employee_name"
doctype.naming_rule = "By fieldname"
doctype.title_field = "employee_name"
doctype.sort_field = "modified"
doctype.sort_order = "DESC"
doctype.default_view = "List"
doctype.search_fields = "employee,employee_name"
doctype.track_changes = 1
doctype.route = "weeklytimesheet"
doctype.icon = "fa fa-calendar"
doctype.description = "Weekly Timesheet for tracking project activities"

# Add basic fields
doctype.append("fields", {
    "fieldname": "employee",
    "fieldtype": "Link",
    "label": "Employee",
    "options": "Employee",
    "reqd": 1,
    "in_list_view": 1,
    "read_only": 1
})

doctype.append("fields", {
    "fieldname": "employee_name", 
    "fieldtype": "Data",
    "label": "Employee Name",
    "in_list_view": 1,
    "read_only": 1
})

doctype.append("fields", {
    "fieldname": "from_date",
    "fieldtype": "Date", 
    "label": "From Date",
    "reqd": 1,
    "in_list_view": 1
})

doctype.append("fields", {
    "fieldname": "to_date",
    "fieldtype": "Date",
    "label": "To Date", 
    "reqd": 1,
    "in_list_view": 1
})

doctype.append("fields", {
    "fieldname": "total_hours",
    "fieldtype": "Float",
    "label": "Total Hours",
    "precision": "2",
    "in_list_view": 1,
    "read_only": 1
})

# Add permissions
doctype.append("permissions", {
    "role": "System Manager",
    "create": 1,
    "read": 1,
    "write": 1,
    "delete": 1,
    "print": 1,
    "email": 1,
    "export": 1,
    "share": 1,
    "report": 1
})

doctype.append("permissions", {
    "role": "Employee", 
    "create": 1,
    "read": 1,
    "write": 1,
    "print": 1,
    "email": 1,
    "export": 1,
    "share": 0,
    "report": 1
})

doctype.insert()
frappe.db.commit()
print("âœ… WeeklyTimesheet created successfully!")